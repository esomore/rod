(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{dPvw:function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function w(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.r(t);var O,g,j,C,k,x,I,P,S,R,N,U,_,L,M,E,z,A,G,T,D,B,Z,F,K,J,V,$,q,H,Q,W,X,Y,ee,te,ne,re,oe,ie=n("4Iz4"),ae=n("lBHI"),ce=n("DrMS"),se=n("5OaP"),le=n("jMw0"),pe=n("wCQ/"),ue=n.n(pe),he=n("oeWf"),fe=n("vI8o"),de=/^(?:[A-Za-z0-9+/]{4}){10}(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)+$/,be=/^[A-Za-z0-9\-\_]{40,50}\.[A-Za-z0-9\_\-]{40,50}$/,ye=Object(ie.a)(O||(O=u(['\n<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n</svg>\n']))),me=Object(ie.a)(g||(g=u(['\n<svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n</svg>\n']))),ve=function(e){function t(){var e;return(e=h.call(this)).children=[],e.state={groups:{},children:{},shownChildrenCount:50},e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e);var n,l,p,h=s(t);return n=t,l=[{key:"getNode",value:function(){if(this.props.path.length>1){var e=this.props.path;return 0===e.indexOf("Public/Users")&&(e=e.replace("/Users","")),(e=e.split("/")).slice(1).reduce((function(e,t){return t&&e.get(decodeURIComponent(t))||e}),this.props.gun)}return this.props.gun}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidMount",value:function(){var e=this;if(this.isMine=0===this.props.path.indexOf("Public/Users/~".concat(le.a.getPubKey())),this.isGroup=0===this.props.path.indexOf("Group/"),this.isPublicRoot="Public"===this.props.path,this.isUserList="Public/Users"===this.props.path,this.isGroupRoot="Group"===this.props.path,this.isLocal=0===this.props.path.indexOf("Local"),this.children={},this.props.children&&"object"===i(this.props.children)&&(this.children=o(this.children,this.props.children)),this.isPublicRoot&&(this.children=o(this.children,{"#":{value:{_:1},displayName:"ContentAddressed"},Users:{value:{_:1}}})),this.isUserList){var t={};t["~".concat(le.a.getPubKey())]={value:{_:1}},this.children=o(this.children,t)}if(this.isGroupRoot){var n={};ae.a.local.get("groups").map(this.sub((function(t,r){t?n[r]=!0:delete n[r],e.setState({groups:n})})))}this.setState({children:this.children,shownChildrenCount:50});var a=this.sub(function(){var t,n=(t=function*(t,n,r,i,a){if("_"!==n&&(!e.isPublicRoot||0!==n.indexOf("~"))&&(!e.isUserList||n.substr(1).match(be))){var c;if("string"==typeof t&&0===t.indexOf("SEA{"))try{var s=le.a.getKey(),l=yield ue.a.SEA.decrypt(t,s);void 0===l&&(e.mySecret||(e.mySecret=yield ue.a.SEA.secret(s.epub,s),l=yield ue.a.SEA.decrypt(t,e.mySecret))),void 0!==l?(t=l,c="Decrypted"):c="Encrypted"}catch(i){}e.children[n]=o(e.children[n]||{},{value:t,encryption:c,from:a}),e.setState({children:e.children})}},function(){var e=this,n=arguments;return new Promise((function(o,i){function a(e){r(s,o,i,a,c,"next",e)}function c(e){r(s,o,i,a,c,"throw",e)}var s=t.apply(e,n);a(void 0)}))});return function(e,t,r,o,i){return n.apply(this,arguments)}}());if(!this.isGroupRoot)if(this.isGroup){var c=this.props.path.split("/").slice(2).join("/");this.props.gun.map(c,a)}else this.getNode().map(a)}},{key:"onChildObjectClick",value:function(e,t){e.preventDefault(),this.children[t].open=!this.children[t].open,this.setState({children:this.children})}},{key:"onShowMoreClick",value:function(e,t){e.preventDefault(),this.children[t].showMore=!this.children[t].showMore,this.setState({children:this.children})}},{key:"renderChildObject",value:function(e,n){var r=this,o="".concat(this.props.path,"/").concat(encodeURIComponent(e)),i=e.substr(1);return Object(ie.a)(j||(j=u(['\n      <div class="explorer-row" style="padding-left: ','em">\n        <span onClick=',">",'</span>\n        <a href="/explorer/','">\n            <b>\n                ',"\n            </b>\n        </a>\n        ","\n      </div>\n      ","\n    "])),this.props.indent,(function(t){return r.onChildObjectClick(t,e)}),this.state.children[e].open?ye:me,encodeURIComponent(o),"string"==typeof e&&i.match(be)?Object(ie.a)(C||(C=u(["<"," key="," pub=",' placeholder="user"/>'])),he.a,e,i):n||e,le.a.getPubKey()===i?Object(ie.a)(k||(k=u(['<small class="mar-left5">(you)</small>']))):"",this.state.children[e].open?Object(ie.a)(x||(x=u(["<"," gun="," indent="," key="," path="," isGroup=","/>"])),t,this.props.gun,this.props.indent+1,o,o,this.props.isGroup):"")}},{key:"renderChildValue",value:function(e,t){var n,r=this,o=this.children[e].encryption,i=this.children[e].from,a="Decrypted"===o,c=function(e,t,n){return Object(ie.a)(I||(I=u(["<a class="," href=",">","</a>"])),void 0===n?"mar-left5":n,e,t)},s=Object(ie.a)(P||(P=u(["\n      ","\n      ","\n    "])),"string"==typeof e&&e.match(de)?c("/post/".concat(encodeURIComponent(e)),"#"):"","string"==typeof e&&e.match(be)?c("/explorer/Public%2F~".concat(encodeURIComponent(encodeURIComponent(e))),Object(ie.a)(S||(S=u(["<"," key="," pub=",' placeholder="user"/>'])),he.a,e,e)):"");if(o)n=a?JSON.stringify(t):Object(ie.a)(R||(R=u(["<i>Encrypted value</i>"])));else{var l=le.a.getPubKey(),p=(this.isMine||this.isLocal)&&"".concat(this.props.path,"/").concat(encodeURIComponent(e)).replace("Public/Users/~".concat(l,"/"),"").replace("Local/","");if("string"==typeof t&&0===t.indexOf("data:image"))n=this.isMine?Object(ie.a)(N||(N=u(["<iris-img user="," path=","/>"])),l,p):Object(ie.a)(U||(U=u(["<img src=","/>"])),t);else{var h,f=JSON.stringify(t);f.length>100&&(h=!0,this.state.children[e].showMore||(f=f.slice(0,100)));var d=Object(ie.a)(_||(_=u(["\n          ","\n          ","\n          ","\n        "])),"string"==typeof t&&t.match(de)?c("/post/".concat(encodeURIComponent(t)),"#"):"","epub"!==e&&"string"==typeof t&&t.match(be)?c("/explorer/Public%2F~".concat(encodeURIComponent(encodeURIComponent(t))),Object(ie.a)(L||(L=u(["<"," key="," pub=",' placeholder="user"/>'])),he.a,t,t)):"","string"==typeof i?Object(ie.a)(M||(M=u(["<small> from ","</small>"])),c("/explorer/Public%2F~".concat(encodeURIComponent(encodeURIComponent(i))),Object(ie.a)(E||(E=u(["<"," key="," pub=",' placeholder="user"/>'])),he.a,i,i),"")):"");n=this.isMine||this.isLocal?Object(ie.a)(z||(z=u(["\n          <"," gun=",' placeholder="empty" key='," user="," path="," editable="," json=","/>\n          ","\n        "])),fe.a,this.props.gun,p,this.isLocal?null:l,p,!0,!0,d):Object(ie.a)(A||(A=u(["\n          <span class=",">\n            ","\n            ","\n            ","\n          </span>\n        "])),"string"==typeof t?"":"iris-non-string",f,h?Object(ie.a)(G||(G=u(["\n              <a onClick=",' href="">',"</a>\n            "])),(function(t){return r.onShowMoreClick(t,e)}),this.state.children[e].showMore?"less":"more"):"",d)}}return Object(ie.a)(T||(T=u(['\n      <div class="explorer-row" style="padding-left: ','em">\n        <b class="val">'," ","</b>:\n        "," ","\n      </div>\n    "])),this.props.indent,e,s,o?Object(ie.a)(D||(D=u(['\n          <span class="tooltip"><span class="tooltiptext">'," value</span>\n            ","\n          </span>\n        "])),o,a?"🔓":""):"",n)}},{key:"onExpandClicked",value:function(){var e=this,t=!this.state.expandAll;Object.keys(this.children).forEach((function(n){e.children[n].open=t})),this.setState({expandAll:t,children:this.children})}},{key:"onNewItemSubmit",value:function(e){if(e.preventDefault(),this.state.newItemName){var t=this.state.newItemName.trim();"object"===this.state.newItemType?this.getNode().get(t).put({a:null}):this.getNode().get(t).put(""),this.setState({newItemType:!1,newItemName:""})}}},{key:"onNewItemNameInput",value:function(e){this.setState({newItemName:e.target.value.trimStart().replace("  "," ")})}},{key:"showNewItemClicked",value:function(e){this.setState({newItemType:e}),setTimeout((function(){return document.querySelector("#newItemNameInput").focus()}),0)}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.children).sort(),n=t.indexOf("~".concat(le.a.getPubKey()));if(n>0){var r=t.splice(n,1);t.unshift(r[0])}var o=t.length>this.state.shownChildrenCount;return Object(ie.a)(B||(B=u(["\n      ","\n      \n      ","\n      \n      ","\n    "])),0===this.props.indent?Object(ie.a)(Z||(Z=u(['\n        <div class="explorer-row" style="padding-left: ','em">\n          ',"\n          ","\n        </div>\n      "])),this.props.indent,this.props.showTools?Object(ie.a)(F||(F=u(['\n            <p class="explorer-tools">\n              <a onClick=',">","</a>\n              <a onClick=",">New object</a>\n              <a onClick=",">New value</a>\n              "," items\n            </p>\n          "])),(function(){return e.onExpandClicked()}),this.state.expandAll?"Close all":"Expand all",(function(){return e.showNewItemClicked("object")}),(function(){return e.showNewItemClicked("value")}),t.length):"",this.state.newItemType?Object(ie.a)(K||(K=u(["\n            <p>\n              <form onSubmit=",'>\n                <input id="newItemNameInput" type="text" onInput='," value=",' placeholder="New ',' name"/>\n                <button type="submit">Create</button>\n                <button onClick=',">Cancel</button>\n              </form>\n            </p>\n          "])),(function(t){return e.onNewItemSubmit(t)}),(function(t){return e.onNewItemNameInput(t)}),this.state.newItemName,this.state.newItemType,(function(){return e.setState({newItemType:!1})})):""):"",this.isGroupRoot?Object.keys(this.state.groups).map((function(e){return Object(ie.a)(J||(J=u(['\n          <div class="explorer-row" style="padding-left: 1em">\n              ','\n              <a href="/explorer/Group%2F','"><b>',"</b></a>\n          </div>\n      "])),me,encodeURIComponent(encodeURIComponent(e)),e)})):t.slice(0,this.state.shownChildrenCount).map((function(t){var n=e.state.children[t].value,r=e.state.children[t].displayName;return"object"===i(n)&&n&&n._?e.renderChildObject(t,r):e.renderChildValue(t,n)})),o?Object(ie.a)(V||(V=u(['\n        <a style="padding-left: ','em" href="" onClick=',">More (",")</a>\n      "])),this.props.indent+1,(function(t){t.preventDefault(),e.setState({shownChildrenCount:e.state.shownChildrenCount+50})}),t.length-this.state.shownChildrenCount):"")}}],l&&a(n.prototype,l),p&&a(n,p),Object.defineProperty(n,"prototype",{writable:!1}),t}(se.a),we=ve,Oe=n("3rgF"),ge=/^[A-Za-z0-9\-\_]{40,50}\.[A-Za-z0-9\_\-]{40,50}$/,je=Object(ie.a)($||($=w(['\n<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n</svg>\n']))),Ce=Object(ie.a)(q||(q=w(['\n<svg width="12" height="12" fill="currentColor" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n</svg>\n']))),ke=function(e){function t(){return f(this,t),i.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var n,r,o,i=y(t);return n=t,(r=[{key:"renderView",value:function(){var e=this,t=(this.props.node||"").split("/"),n=t.length&&t[0],r=ae.a.public;"Local"===n?r=ae.a.local:"Group"===n&&(r=ae.a.group(t.length>=2&&t[1]||void 0));var o=!t[0].length,i=t.map((function(e,n){var r=(e=decodeURIComponent(e)).substr(1),o=r.match(ge);return Object(ie.a)(H||(H=w(["\n        ",' <a href="/explorer/','">\n            ',"\n        </a>\n        ","\n      "])),Ce,encodeURIComponent(t.slice(0,n+1).join("/")),o?Object(ie.a)(Q||(Q=w(["<"," key="," pub=",' placeholder="profile name" />'])),he.a,r,r):e,o?Object(ie.a)(W||(W=w(['<small> (<a href="/profile/','">',"</a>)</small>"])),r,Object(Oe.c)("profile")):"")})),a=this.state;return Object(ie.a)(X||(X=w(['\n      <p>\n        <a href="/explorer">All</a> ',"\n        ","\n      </p>\n      ","\n    "])),t[0].length?i:"",o?Object(ie.a)(Y||(Y=w(['<small class="mar-left5">Iris raw data.</small>']))):"",o?Object(ie.a)(ee||(ee=w(['\n        <div class="explorer-row">\n            <span onClick=',">",'</span>\n            <a href="/explorer/Public"><b>Public</b></a>\n            <small class="mar-left5">(synced with peers)</small>\n        </div>\n        ','\n        <div class="explorer-row">\n            <span onClick=',">",'</span>\n            <a href="/explorer/Group"><b>Group</b></a>\n            <small class="mar-left5">(public data, composite object of all the users in the <a href="/explorer/Local%2Fgroups">group</a>)</small>\n        </div>\n        ','\n        <div class="explorer-row">\n            <span onClick=',">",'</span>\n            <a href="/explorer/Local"><b>Local</b></a>\n            <small class="mar-left5">(only stored on your device)</small>\n        </div>\n        ',"\n      "])),(function(){return e.setState({publicOpen:!a.publicOpen})}),a.publicOpen?je:Ce,a.publicOpen?Object(ie.a)(te||(te=w(["<"," indent="," gun="," key='Public' path='Public'/>"])),we,1,ae.a.public):"",(function(){return e.setState({groupOpen:!a.groupOpen})}),a.groupOpen?je:Ce,a.groupOpen?Object(ie.a)(ne||(ne=w(["<"," indent="," gun="," key='Group' path='Group'/>"])),we,1,ae.a.public):"",(function(){return e.setState({localOpen:!a.localOpen})}),a.localOpen?je:Ce,a.localOpen?Object(ie.a)(re||(re=w(["<"," indent="," gun="," key=\"Local\" path='Local'/>"])),we,1,ae.a.local):""):Object(ie.a)(oe||(oe=w(["\n        <"," indent="," showTools="," gun="," key="," path=","/>\n      "])),we,0,!0,r,this.props.node,this.props.node))}}])&&d(n.prototype,r),o&&d(n,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(ce.a);t.default=ke}}]);
//# sourceMappingURL=2.chunk.68b63.js.map